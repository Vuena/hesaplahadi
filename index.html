<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="HesaplaHadi ile KDV, Tevkifat, Kredi, Kıdem Tazminatı ve Yapay Zeka destekli hesaplama araçlarını ücretsiz kullanın. Finans, sağlık ve eğitim hesaplamaları tek adreste.">
    <meta name="keywords" content="kdv hesaplama, yapay zeka hesaplama, diyet listesi hazırla, kredi hesaplama, maaş hesaplama, kıdem tazminatı, tevkifat hesaplama">
    <meta name="author" content="HesaplaHadi">
    <meta name="robots" content="index, follow">
    <title>HesaplaHadi - Finans, Vergi ve AI Destekli Hesaplama Araçları</title>

    <!-- JSON-LD Structured Data for SEO (Main Site) -->
    <script type="application/ld+json" id="main-schema">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "HesaplaHadi",
      "url": "https://hesaplahadi.com",
      "description": "Profesyonel ve günlük kullanım için ücretsiz, yapay zeka destekli hesaplama araçları koleksiyonu.",
      "applicationCategory": "FinanceApplication",
      "operatingSystem": "All",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "TRY"
      }
    }
    </script>
    <!-- Dynamic Tool Schema will be injected here -->
    <script type="application/ld+json" id="tool-schema">{}</script>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; }

        /* Glassmorphism & Premium UI */
        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 10px 15px -3px rgba(0, 0, 0, 0.05);
        }

        .nav-item { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); border-left: 3px solid transparent; }
        .nav-active {
            background: linear-gradient(90deg, #eff6ff 0%, rgba(255,255,255,0) 100%);
            color: #2563eb;
            font-weight: 600;
            border-left: 3px solid #2563eb;
            padding-left: 1.25rem !important;
        }

        .input-premium {
            transition: all 0.2s ease;
            border: 1px solid #e2e8f0;
        }
        .input-premium:focus {
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
            border-color: #3b82f6;
            outline: none;
            transform: translateY(-1px);
        }

        .btn-calc {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            transition: all 0.3s ease;
        }
        .btn-calc:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px -5px rgba(37, 99, 235, 0.4);
        }
        .btn-calc:active { transform: translateY(0); }

        .result-card {
            background: linear-gradient(145deg, #ffffff 0%, #f1f5f9 100%);
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        .result-card:hover { transform: translateY(-2px); box-shadow: 0 10px 30px -10px rgba(0,0,0,0.08); }

        .cat-header {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: #94a3b8;
            font-weight: 700;
            padding: 1.5rem 1rem 0.5rem;
        }

        .animate-slide-up { animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .info-panel h2 { font-size: 1.25rem; font-weight: 700; color: #1e293b; margin-top: 1.5rem; margin-bottom: 0.75rem; }
        .info-panel p { color: #475569; margin-bottom: 1rem; line-height: 1.7; }
        .info-panel ul, .info-panel ol { margin-bottom: 1rem; padding-left: 1.5rem; color: #475569; }
        .info-panel li { margin-bottom: 0.5rem; }

        /* Scrollbar */
        .custom-scroll::-webkit-scrollbar { width: 5px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        #cookie-banner { transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1); }
        .translate-y-full { transform: translateY(100%); }
    </style>
</head>
<body class="flex flex-col min-h-screen text-slate-800">

    <!-- Header -->
    <header class="bg-white/90 backdrop-blur-md shadow-sm sticky top-0 z-50 border-b border-slate-100">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="#kdv" class="flex items-center space-x-2 group" onclick="switchTab('kdv')">
                <div class="bg-gradient-to-br from-blue-600 to-indigo-700 text-white p-2.5 rounded-xl group-hover:shadow-lg group-hover:shadow-blue-500/30 transition duration-300">
                    <i class="fa-solid fa-calculator text-lg"></i>
                </div>
                <div class="leading-tight">
                    <h1 class="text-xl md:text-2xl font-extrabold tracking-tight text-slate-900">Hesapla<span class="text-blue-600">Hadi</span></h1>
                    <span class="text-[10px] text-slate-500 font-bold tracking-wide uppercase">Premium Araçlar</span>
                </div>
            </a>

            <div class="flex-1 max-w-xl mx-8 relative hidden md:block">
                <i class="fa-solid fa-search absolute left-4 top-3.5 text-slate-400"></i>
                <input type="text" id="global-search" onkeyup="filterTools()" placeholder="Ne hesaplamak istersiniz?" class="w-full pl-11 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:bg-white focus:ring-2 focus:ring-blue-100 transition shadow-sm input-premium">
            </div>

            <div class="hidden md:flex items-center space-x-3 text-xs font-bold text-slate-600">
                <a href="#ai_asistan" onclick="switchTab('ai_asistan')" class="flex items-center gap-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 px-4 py-2 rounded-xl border border-indigo-100 transition duration-300">
                    <i class="fa-solid fa-wand-magic-sparkles"></i>
                    <span>AI Asistan</span>
                </a>
            </div>

            <button class="md:hidden text-slate-600 p-2 hover:bg-slate-100 rounded-lg transition" onclick="document.getElementById('mobile-search-area').classList.toggle('hidden')">
                <i class="fa-solid fa-search text-xl"></i>
            </button>
        </div>

        <!-- Mobile Search Dropdown -->
        <div id="mobile-search-area" class="hidden md:hidden px-4 pb-4 border-t border-slate-100 bg-white">
             <div class="relative mt-3">
                <i class="fa-solid fa-search absolute left-4 top-3.5 text-slate-400"></i>
                <input type="text" id="mobile-search" onkeyup="filterToolsMobile()" placeholder="Araç ara..." class="w-full pl-11 pr-4 py-3 border border-slate-200 rounded-xl text-sm focus:outline-none focus:border-blue-500 bg-slate-50 input-premium">
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-12 gap-8 flex-grow">

        <!-- Left Sidebar (Navigation) -->
        <nav class="hidden lg:block lg:col-span-3 space-y-4">
            <div class="bg-white/80 backdrop-blur glass-panel rounded-2xl overflow-hidden h-[calc(100vh-120px)] flex flex-col sticky top-24">
                <div class="bg-slate-50/50 px-5 py-4 border-b border-slate-100 flex justify-between items-center shrink-0">
                    <h3 class="font-bold text-slate-700 text-sm uppercase tracking-wide">Hesaplama Araçları</h3>
                    <i class="fa-solid fa-layer-group text-slate-400"></i>
                </div>
                <div id="sidebar-list" class="overflow-y-auto custom-scroll p-2 space-y-1 flex-1">
                    <!-- JS Populated -->
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="col-span-1 lg:col-span-6 space-y-6">

            <!-- Mobile Horizontal Categories -->
            <div class="lg:hidden flex overflow-x-auto gap-2 pb-3 mb-2 scrollbar-hide border-b border-slate-200" id="mob-cats">
                <!-- JS Populated -->
            </div>

            <!-- DYNAMIC TOOL AREA -->
            <div id="tool-container">
                <!-- Tools injected by JS -->
            </div>

            <!-- Dynamic Info Panel (FAQ & Details) -->
            <article id="info-panel" class="bg-white rounded-2xl shadow-sm border border-slate-200 p-8 info-panel mt-8 animate-slide-up hidden">
                <!-- Content injected by JS -->
            </article>

        </main>

        <!-- Right Sidebar (Ads & Popular) -->
        <aside class="col-span-1 lg:col-span-3 space-y-6">
            <!-- Popular Widget -->
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                <h4 class="font-bold text-xs text-slate-500 mb-4 uppercase tracking-wider border-b border-slate-100 pb-2 flex items-center gap-2">
                    <i class="fa-solid fa-fire text-orange-500"></i> Popüler Araçlar
                </h4>
                <ul class="text-sm space-y-2 text-slate-600 font-medium" id="popular-list">
                    <li class="cursor-pointer hover:text-indigo-600 hover:bg-indigo-50 p-2.5 rounded-lg transition flex items-center justify-between group" onclick="window.location.hash='#ai_asistan'">
                        <span class="flex items-center gap-2"><i class="fa-solid fa-wand-magic-sparkles text-indigo-500 group-hover:scale-110 transition"></i> AI Asistan</span> <i class="fa-solid fa-chevron-right text-xs opacity-30 group-hover:opacity-100 transition"></i>
                    </li>
                    <li class="cursor-pointer hover:text-blue-600 hover:bg-blue-50 p-2.5 rounded-lg transition flex items-center justify-between group" onclick="window.location.hash='#kdv'">
                        <span>KDV Hesaplama</span> <i class="fa-solid fa-chevron-right text-xs opacity-30 group-hover:opacity-100 transition"></i>
                    </li>
                    <li class="cursor-pointer hover:text-blue-600 hover:bg-blue-50 p-2.5 rounded-lg transition flex items-center justify-between group" onclick="window.location.hash='#tevkifat'">
                        <span>Tevkifat Hesapla</span> <i class="fa-solid fa-chevron-right text-xs opacity-30 group-hover:opacity-100 transition"></i>
                    </li>
                    <li class="cursor-pointer hover:text-blue-600 hover:bg-blue-50 p-2.5 rounded-lg transition flex items-center justify-between group" onclick="window.location.hash='#kidem'">
                        <span>Kıdem Tazminatı</span> <i class="fa-solid fa-chevron-right text-xs opacity-30 group-hover:opacity-100 transition"></i>
                    </li>
                </ul>
            </div>

            <!-- Sidebar Ad -->
            <div class="ad-placeholder h-[400px] w-full rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50 flex flex-col items-center justify-center text-slate-400 text-sm font-semibold relative overflow-hidden group">
                <div class="absolute inset-0 bg-gradient-to-tr from-transparent to-slate-100 opacity-0 group-hover:opacity-100 transition duration-700"></div>
                <span>Google Ads (Dikey)</span>
                <span class="text-xs font-normal mt-1 opacity-70">300x600</span>
                <div class="absolute top-2 right-2 text-[9px] text-slate-300 uppercase tracking-widest border border-slate-200 px-1 rounded">Reklam</div>
            </div>
        </aside>

    </div>

    <!-- Cookie Consent Banner -->
    <div id="cookie-banner" class="fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur shadow-[0_-5px_20px_rgba(0,0,0,0.05)] border-t border-slate-200 p-4 z-50 transform translate-y-full">
        <div class="container mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
            <div class="text-sm text-slate-600 text-center md:text-left">
                <p><strong>Çerez Politikası:</strong> Sitemizde deneyiminizi iyileştirmek ve reklamları kişiselleştirmek için çerezler kullanılmaktadır. Devam ederek kabul etmiş sayılırsınız.</p>
            </div>
            <div class="flex gap-3">
                <button onclick="acceptCookies()" class="bg-slate-900 hover:bg-slate-800 text-white text-sm font-bold py-2.5 px-6 rounded-xl transition shadow-lg shadow-slate-900/20">Tamam</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 py-12 mt-auto border-t border-slate-800">
        <div class="container mx-auto px-4 text-center">
            <div class="mb-8">
                <span class="text-3xl font-bold text-white tracking-tight">Hesapla<span class="text-blue-500">Hadi</span></span>
                <p class="text-sm mt-3 opacity-60 max-w-md mx-auto">Türkiye'nin en kapsamlı ve ücretsiz finansal hesaplama platformu. Yapay zeka destekli araçlarla işlerinizi hızlandırın.</p>
            </div>
            <div class="flex justify-center flex-wrap gap-6 text-sm font-medium mb-10 text-slate-300">
                <a href="#" class="hover:text-white transition">Hakkımızda</a>
                <a href="#" class="hover:text-white transition">Gizlilik Politikası</a>
                <a href="#" class="hover:text-white transition">Kullanım Şartları</a>
                <a href="#" class="hover:text-white transition">İletişim</a>
                <a href="sitemap.xml" class="hover:text-white transition">Sitemap</a>
            </div>
            <div class="text-xs text-slate-600 border-t border-slate-800 pt-8">
                &copy; 2026 HesaplaHadi. Tüm hakları saklıdır. Veriler bilgilendirme amaçlıdır.
            </div>
        </div>
    </footer>

    <script>
        // API Key Obfuscation
        const _k = "QUl6YVN5Qzh6SGxSTkZvck1peW5tM01qUnFNc3RvWjRNczBwQVdR";
        const apiKey = atob(_k);

        // --- GEMINI API HELPER ---
        async function callGemini(userPrompt, systemPrompt) {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{ parts: [{ text: userPrompt }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] }
            };

            for (let i = 0; i < 3; i++) {
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const data = await response.json();
                    if (!response.ok) throw new Error(data.error?.message || response.statusText);
                    return data.candidates[0].content.parts[0].text;
                } catch (error) {
                    if (i === 2) throw error;
                    await new Promise(r => setTimeout(r, 1000));
                }
            }
        }

        // --- COOKIE & UTILS ---
        function checkCookies() { if(!localStorage.getItem('cookiesAccepted')) setTimeout(()=>document.getElementById('cookie-banner').classList.remove('translate-y-full'), 1000); }
        function acceptCookies() { localStorage.setItem('cookiesAccepted','true'); document.getElementById('cookie-banner').classList.add('translate-y-full'); }

        function copyResult(id) {
            const val = document.getElementById(`val-${id}`).innerText;
            const btn = document.getElementById(`btn-copy-${id}`);
            navigator.clipboard.writeText(val).then(() => {
                const h = btn.innerHTML; btn.innerHTML = '<i class="fa-solid fa-check"></i>';
                setTimeout(()=>btn.innerHTML=h, 1500);
            }).catch(e => console.error(e));
        }

        // --- TOOL DATA & CONTENT ---
        const tools = [
            { id: 'ai_asistan', cat: 'Yapay Zeka', name: 'AI Hesaplama Asistanı', inputs: [
                {id:'q',l:'Sorunuzu detaylıca yazın',type:'textarea',p:'Örn: 100.000 TL kredi için 24 ay vade ve %3.99 faizle aylık taksit ne olur?'}
            ], btn:'Yapay Zekaya Sor', color:'indigo', desc:'Finansal, matematiksel veya günlük hesaplama sorularınızı yapay zekaya sorun.',
              meta: { t: 'Yapay Zeka Hesaplama Asistanı - HesaplaHadi', d: 'Karmaşık finansal ve matematiksel sorularınızı yapay zekaya sorun. Anlık ve doğru cevaplar alın.' },
              faq: {
                  h: 'AI Asistan Nasıl Kullanılır?',
                  c: '<p>AI Asistan, Google Gemini altyapısını kullanarak sorularınızı yanıtlar. Kredi hesaplamaları, döviz çevirileri, matematik problemleri veya genel kültür soruları sorabilirsiniz.</p>'
              }
            },
            { id: 'kdv', cat: 'Finans', name: 'KDV Hesaplama', inputs: [
                {id:'amt',l:'Tutar (TL)',p:'1000'}, {id:'rate',l:'KDV Oranı',type:'select',opts:['%1 (Gıda)','%10 (Tekstil)','%20 (Genel)']}, {id:'type',l:'İşlem Türü',type:'select',opts:['KDV Dahil','KDV Hariç']}
            ], btn:'Hesapla', color:'blue', desc:'KDV Dahil ve Hariç tutarları güncel oranlarla (%1, %10, %20) hesaplayın.',
              meta: { t: '2026 KDV Hesaplama Aracı - Dahil ve Hariç Hesapla', d: 'Güncel KDV oranları ile KDV dahil ve hariç tutarları kolayca hesaplayın. %1, %10 ve %20 oran desteği.' },
              schema: { "@type": "Calculator", "name": "KDV Hesaplama", "description": "KDV dahil ve hariç tutar hesaplama aracı.", "category": "Finance" },
              faq: {
                  h: 'KDV Nasıl Hesaplanır?',
                  c: '<p><strong>KDV Dahil Hesaplama:</strong> Tutar x (1 + Vergi Oranı) formülü kullanılır. Örneğin 100 TL + %20 KDV = 120 TL.</p><p><strong>KDV Hariç Hesaplama:</strong> Tutar / (1 + Vergi Oranı) formülü kullanılır. Örneğin 120 TL (KDV Dahil) / 1.20 = 100 TL.</p>'
              }
            },
            { id: 'tevkifat', cat: 'Finans', name: 'KDV Tevkifat Hesaplama', inputs: [
                {id:'amt',l:'Tutar (TL)',p:'1000'}, {id:'rate',l:'KDV Oranı',type:'select',opts:['%1','%10','%20']}, {id:'tev',l:'Tevkifat Oranı',type:'select',opts:['2/10','3/10','4/10','5/10','7/10','9/10']}, {id:'type',l:'Hesaplama',type:'select',opts:['KDV Hariç','KDV Dahil']}
            ], btn:'Hesapla', color:'blue', desc:'Tevkifatlı fatura kesimi için alıcı ve satıcı paylarını hesaplayın.',
              meta: { t: 'KDV Tevkifat Hesaplama - Fatura Oluşturma Aracı', d: 'Tevkifatlı faturalarınız için KDV kesintisi ve ödenecek tutarları saniyeler içinde hesaplayın.' },
              faq: { h: 'Tevkifat Nedir?', c: '<p>KDV\'nin bir kısmının alıcı, bir kısmının ise satıcı tarafından devlete ödenmesidir. Bu araç ile 2/10, 5/10 gibi oranlara göre dağılımı görebilirsiniz.</p>' }
            },
            { id: 'kidem', cat: 'Finans', name: 'Kıdem Tazminatı', inputs: [
                {id:'start',l:'İşe Giriş Tarihi',type:'date'}, {id:'end',l:'İşten Çıkış Tarihi',type:'date'}, {id:'salary',l:'Brüt Maaş (TL)',p:'25000'}
            ], btn:'Tazminat Hesapla', color:'blue', desc:'Çalışma sürenize göre hak ettiğiniz kıdem tazminatını net olarak hesaplayın.',
              meta: { t: '2026 Kıdem Tazminatı Hesaplama - Net Tutar', d: 'Çalışma gün sayısına göre kıdem tazminatınızı hesaplayın. Damga vergisi düşülmüş net tutarı öğrenin.' },
              faq: { h: 'Kıdem Tazminatı Şartları', c: '<p>En az 1 yıl çalışmış olmanız ve işten haklı nedenlerle (veya işveren tarafından) çıkarılmış olmanız gerekir. Her tam yıl için 30 günlük brüt ücret ödenir.</p>' }
            },
            { id: 'kredi', cat: 'Finans', name: 'Kredi Hesaplama', inputs: [{id:'amt',l:'Kredi Tutarı',p:'100000'}, {id:'term',l:'Vade (Ay)',p:'24'}, {id:'rate',l:'Aylık Faiz %',p:'3.99'}], btn:'Ödeme Planı Oluştur', color:'blue', desc:'Konut, taşıt veya ihtiyaç kredisi taksitlerini ve toplam geri ödemeyi hesaplayın.',
               meta: { t: 'Kredi Hesaplama Aracı - Faiz ve Taksit Hesapla', d: 'İhtiyaç, konut ve taşıt kredisi için aylık taksit tutarlarını ve toplam geri ödemeyi hesaplayın.' },
               faq: { h: 'Kredi Faizi Nasıl Hesaplanır?', c: '<p>Bankaların uyguladığı aylık akdi faiz oranı üzerinden, anapara ve vade süresi dikkate alınarak eşit taksitli ödeme planı oluşturulur.</p>' }
            },
            // Other tools with basic config (meta defaults used in function)
            { id: 'net_brut', cat: 'Finans', name: 'Netten Brüte Maaş', inputs: [{id:'net',l:'Net Maaş',p:'17002'}], btn:'Hesapla', color:'blue' },
            { id: 'brut_net', cat: 'Finans', name: 'Brütten Nete Maaş', inputs: [{id:'brut',l:'Brüt Maaş',p:'20002.50'}], btn:'Hesapla', color:'blue' },
            { id: 'mevduat', cat: 'Finans', name: 'Mevduat Getirisi', inputs: [{id:'amt',l:'Anapara',p:'100000'}, {id:'rate',l:'Yıllık Faiz %',p:'45'}, {id:'days',l:'Gün Sayısı',p:'32'}], btn:'Getiri Hesapla', color:'blue' },
            { id: 'iban', cat: 'Finans', name: 'IBAN Doğrulama', inputs: [{id:'code',l:'IBAN No',p:'TR...'}], btn:'Kontrol Et', color:'blue' },
            { id: 'indirim', cat: 'Finans', name: 'İndirim Hesaplama', inputs: [{id:'price',l:'Etiket Fiyatı',p:'1000'}, {id:'rate',l:'İndirim %',p:'25'}], btn:'Hesapla', color:'blue' },
            { id: 'karzarar', cat: 'Finans', name: 'Kâr Marjı', inputs: [{id:'cost',l:'Maliyet',p:'100'}, {id:'sell',l:'Satış Fiyatı',p:'150'}], btn:'Analiz Et', color:'blue' },
            { id: 'bilesik', cat: 'Finans', name: 'Bileşik Faiz', inputs: [{id:'p',l:'Anapara',p:'10000'}, {id:'r',l:'Yıllık Getiri %',p:'20'}, {id:'t',l:'Yıl',p:'5'}], btn:'Hesapla', color:'blue' },
            { id: 'kk_asgari', cat: 'Finans', name: 'K.K. Asgari Ödeme', inputs: [{id:'lim',l:'Kart Limiti',p:'50000'}, {id:'debt',l:'Dönem Borcu',p:'15000'}], btn:'Hesapla', color:'blue' },
            { id: 'komisyon', cat: 'Finans', name: 'Emlak Komisyonu', inputs: [{id:'price',l:'Satış Bedeli',p:'3000000'}], btn:'Hesapla', color:'blue' },
            { id: 'zam', cat: 'Finans', name: 'Maaş Zam', inputs: [{id:'curr',l:'Mevcut Maaş',p:'17002'}, {id:'rate',l:'Zam %',p:'30'}], btn:'Hesapla', color:'blue' },
            { id: 'ai_diyet', cat: 'Sağlık', name: 'AI Diyetisyen', inputs: [{id:'w',l:'Kilo (kg)',p:'80'}, {id:'h',l:'Boy (cm)',p:'180'}, {id:'goal',l:'Hedef',type:'select',opts:['Kilo Vermek','Kilo Almak','Formu Korumak','Kas Yapmak']}], btn:'Plan Oluştur', color:'indigo' },
            { id: 'bmi', cat: 'Sağlık', name: 'Vücut Kitle İndeksi', inputs: [{id:'h',l:'Boy (cm)',p:'175'}, {id:'w',l:'Kilo (kg)',p:'75'}], btn:'Analiz Et', color:'green' },
            { id: 'idealkilo', cat: 'Sağlık', name: 'İdeal Kilo', inputs: [{id:'h',l:'Boy (cm)',p:'170'}, {id:'g',l:'Cinsiyet',type:'select',opts:['Erkek','Kadın']}], btn:'Hesapla', color:'green' },
            { id: 'bmr', cat: 'Sağlık', name: 'Bazal Metabolizma', inputs: [{id:'w',l:'Kilo',p:'70'}, {id:'h',l:'Boy',p:'175'}, {id:'a',l:'Yaş',p:'30'}, {id:'g',l:'Cinsiyet',type:'select',opts:['Erkek','Kadın']}], btn:'Hesapla', color:'green' },
            { id: 'makro', cat: 'Sağlık', name: 'Günlük Makro İhtiyacı', inputs: [{id:'cal',l:'Hedef Kalori',p:'2000'}], btn:'Planla', color:'green' },
            { id: 'su', cat: 'Sağlık', name: 'Su Tüketimi', inputs: [{id:'w',l:'Kilo (kg)',p:'70'}], btn:'Hesapla', color:'green' },
            { id: 'gebelik', cat: 'Sağlık', name: 'Doğum Tarihi (SAT)', inputs: [{id:'date',l:'Son Adet Tarihi',type:'date'}], btn:'Hesapla', color:'green' },
            { id: 'sigara', cat: 'Sağlık', name: 'Sigara Maliyeti', inputs: [{id:'price',l:'Paket Fiyatı',p:'60'}, {id:'daily',l:'Günlük Adet',p:'20'}], btn:'Zararı Gör', color:'green' },
            { id: 'nabiz', cat: 'Sağlık', name: 'Spor Nabız Aralığı', inputs: [{id:'age',l:'Yaş',p:'30'}], btn:'Hesapla', color:'green' },
            { id: 'yuzde', cat: 'Eğitim', name: 'Yüzde Hesaplama', inputs: [{id:'a',l:'Sayı',p:'500'}, {id:'b',l:'Yüzde Oranı',p:'20'}], btn:'Hesapla', color:'purple' },
            { id: 'sinav', cat: 'Eğitim', name: 'Üniversite Not Ort.', inputs: [{id:'v',l:'Vize Notu',p:'60'}, {id:'f',l:'Final Notu',p:'80'}], btn:'Hesapla', color:'purple' },
            { id: 'takdir', cat: 'Eğitim', name: 'Takdir / Teşekkür', inputs: [{id:'avg',l:'Dönem Ortalaması',p:'86.50'}], btn:'Sorgula', color:'purple' },
            { id: 'dikdortgen', cat: 'Eğitim', name: 'Alan Hesaplama', inputs: [{id:'w',l:'En (m)',p:'5'}, {id:'h',l:'Boy (m)',p:'10'}], btn:'Hesapla', color:'purple' },
            { id: 'kelime', cat: 'Eğitim', name: 'Kelime Sayacı', inputs: [{id:'txt',l:'Metni Yapıştırın',type:'textarea'}], btn:'Analiz Et', color:'purple' },
            { id: 'internet', cat: 'Pratik', name: 'İndirme Süresi', inputs: [{id:'size',l:'Dosya (GB)',p:'10'}, {id:'spd',l:'Hız (Mbps)',p:'35'}], btn:'Hesapla', color:'orange' },
            { id: 'yakit', cat: 'Pratik', name: 'Yakıt Tüketimi', inputs: [{id:'km',l:'Yol (km)',p:'100'}, {id:'lit',l:'Ort. Tüketim (Lt)',p:'7'}, {id:'pr',l:'Litre Fiyatı',p:'42'}], btn:'Maliyet Hesapla', color:'orange' },
            { id: 'yas', cat: 'Pratik', name: 'Tam Yaş Hesaplama', inputs: [{id:'date',l:'Doğum Tarihi',type:'date'}], btn:'Hesapla', color:'orange' },
            { id: 'gun', cat: 'Pratik', name: 'İki Tarih Arası', inputs: [{id:'d1',l:'Başlangıç',type:'date'}, {id:'d2',l:'Bitiş',type:'date'}], btn:'Gün Say', color:'orange' },
            { id: 'sifre', cat: 'Pratik', name: 'Güçlü Şifre Üret', inputs: [{id:'len',l:'Uzunluk',p:'16'}], btn:'Oluştur', color:'orange' },
            { id: 'hiz', cat: 'Pratik', name: 'Hız / Zaman', inputs: [{id:'km',l:'Mesafe (km)',p:'400'}, {id:'hr',l:'Süre (Saat)',p:'4'}], btn:'Hız Bul', color:'orange' }
        ];

        window.onload = function() {
            renderSidebar();
            renderTools();
            checkCookies();
            handleRoute(); // Initial route check
        };

        window.onhashchange = handleRoute; // Handle hash changes

        // --- ROUTING & SEO ---
        function handleRoute() {
            const hash = window.location.hash.substring(1);
            if(hash && tools.find(t=>t.id===hash)) {
                switchTab(hash);
            } else {
                switchTab('kdv'); // Default
            }
        }

        // --- RENDER ENGINE ---
        function renderSidebar() {
            const sidebar = document.getElementById('sidebar-list');
            const mobCats = document.getElementById('mob-cats');
            const cats = [...new Set(tools.map(t => t.cat))];

            cats.forEach(cat => {
                const header = document.createElement('div');
                header.className = 'cat-header'; header.innerText = cat; sidebar.appendChild(header);
                const mb = document.createElement('button');
                mb.className = "px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-semibold whitespace-nowrap hover:bg-blue-50 hover:text-blue-600 transition shadow-sm mr-2";
                mb.innerText = cat; mb.onclick = () => filterByCat(cat); mobCats.appendChild(mb);
                tools.filter(t => t.cat === cat).forEach(t => {
                    const btn = document.createElement('button');
                    btn.id = `btn-${t.id}`;
                    btn.className = 'w-full text-left px-4 py-3 rounded-xl text-xs font-medium transition flex items-center nav-item gap-3 mb-1 text-slate-500 hover:bg-slate-50 hover:text-blue-600';
                    const icon = t.cat === 'Yapay Zeka' ? '<i class="fa-solid fa-wand-magic-sparkles text-indigo-500"></i>' : '<span class="w-1.5 h-1.5 rounded-full bg-slate-300"></span>';
                    btn.innerHTML = `${icon} ${t.name}`;
                    btn.onclick = () => window.location.hash = t.id; // Change hash triggers routing
                    sidebar.appendChild(btn);
                });
            });
        }

        function renderTools() {
            const container = document.getElementById('tool-container');
            tools.forEach(t => {
                const div = document.createElement('div');
                div.id = `content-${t.id}`;
                div.className = 'hidden bg-white/90 backdrop-blur rounded-2xl shadow-sm border border-slate-200 p-6 md:p-8 animate-fade-in relative';
                const themeColor = { blue: 'blue', green: 'emerald', purple: 'violet', orange: 'amber', indigo: 'indigo' }[t.color] || 'blue';

                let html = `
                    <div class="flex items-center gap-4 mb-6 pb-6 border-b border-slate-100">
                        <div class="p-3 bg-${themeColor}-100 rounded-2xl text-${themeColor}-600 shadow-sm"><i class="fa-solid ${t.cat==='Yapay Zeka'?'fa-wand-magic-sparkles':'fa-calculator'} text-xl"></i></div>
                        <div>
                            <h1 class="text-2xl font-bold text-slate-900 tracking-tight">${t.name}</h1>
                            ${t.desc ? `<p class="text-xs text-slate-500 mt-1">${t.desc}</p>` : ''}
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-${t.inputs.length > 2 ? '2' : '1'} gap-6">`;

                t.inputs.forEach(inp => {
                    html += `<div><label class="block text-xs font-bold text-slate-600 uppercase tracking-wide mb-2 ml-1">${inp.l}</label>`;
                    if(inp.type === 'select') {
                        html += `<div class="relative"><select id="${t.id}-${inp.id}" class="w-full p-4 border border-slate-200 rounded-xl bg-slate-50 text-sm font-medium appearance-none focus:bg-white transition cursor-pointer input-premium">`;
                        inp.opts.forEach((o, i) => html += `<option value="${i}">${o}</option>`);
                        html += `</select><i class="fa-solid fa-chevron-down absolute right-4 top-4.5 text-slate-400 text-xs pointer-events-none"></i></div></div>`;
                    } else if (inp.type === 'textarea') {
                        html += `<textarea id="${t.id}-${inp.id}" class="w-full p-4 border border-slate-200 rounded-xl bg-slate-50 text-sm focus:bg-white transition input-premium" rows="4" placeholder="${inp.p || ''}"></textarea></div>`;
                    } else {
                        html += `<input type="${inp.type || 'number'}" id="${t.id}-${inp.id}" class="w-full p-4 border border-slate-200 rounded-xl bg-slate-50 text-sm font-medium focus:bg-white transition input-premium" placeholder="${inp.p || ''}" ${inp.type==='date'?'':'step="any"'}></div>`;
                    }
                });

                html += `</div>
                <button onclick="calc_${t.id}()" class="btn-calc w-full mt-8 py-4 rounded-xl font-bold text-white text-sm tracking-wide shadow-lg shadow-blue-500/20 flex justify-center items-center gap-2">
                    ${t.cat==='Yapay Zeka' ? '<i class="fa-solid fa-wand-magic-sparkles"></i>' : '<i class="fa-solid fa-bolt"></i>'} ${t.btn}
                </button>

                <div id="res-${t.id}" class="result-card hidden mt-8 p-6 rounded-2xl relative group">
                    <button id="btn-copy-${t.id}" onclick="copyResult('${t.id}')" class="absolute top-4 right-4 text-xs bg-white border border-slate-200 px-3 py-1.5 rounded-lg hover:bg-slate-50 transition text-slate-500 flex items-center gap-1 shadow-sm">
                        <i class="fa-regular fa-copy"></i> Kopyala
                    </button>
                    <p class="text-[10px] font-bold text-${themeColor}-600 uppercase tracking-widest mb-2">HESAPLAMA SONUCU</p>
                    <div id="val-${t.id}" class="${t.cat==='Yapay Zeka' ? 'text-base font-medium text-slate-700 text-left ai-output leading-relaxed' : 'text-3xl md:text-4xl font-black text-slate-900 tracking-tight'}"></div>
                    <div id="detail-${t.id}" class="text-sm text-slate-500 mt-3 pt-3 border-t border-slate-200/50 empty:hidden"></div>
                </div>`;
                div.innerHTML = html;
                container.appendChild(div);
            });
        }

        // --- LOGIC: SWITCH TAB & SEO UPDATE ---
        function switchTab(id) {
            // 1. View Transition
            document.querySelectorAll('[id^="content-"]').forEach(d => d.classList.add('hidden'));
            const target = document.getElementById(`content-${id}`);
            if(target) target.classList.remove('hidden');

            // 2. Sidebar Active State
            document.querySelectorAll('[id^="btn-"]').forEach(b => {
                b.classList.remove('nav-active');
                const dot = b.querySelector('span');
                if(dot && !dot.classList.contains('fa-wand-magic-sparkles')) dot.classList.add('bg-slate-300');
            });
            const btn = document.getElementById(`btn-${id}`);
            if(btn) {
                btn.classList.add('nav-active');
                const dot = btn.querySelector('span');
                if(dot && !dot.classList.contains('fa-wand-magic-sparkles')) { dot.classList.remove('bg-slate-300'); dot.classList.add('bg-blue-600'); }
                btn.scrollIntoView({block:'nearest'});
            }

            // 3. Dynamic SEO & Info Panel
            const t = tools.find(x => x.id === id);
            if(t) {
                // Title & Meta
                document.title = t.meta?.t || `${t.name} - HesaplaHadi`;
                document.querySelector('meta[name="description"]').setAttribute("content", t.meta?.d || `${t.name} aracı ile hızlı ve doğru hesaplama yapın.`);

                // Schema Injection
                const schemaScript = document.getElementById('tool-schema');
                if(t.schema) {
                    schemaScript.textContent = JSON.stringify(t.schema);
                } else {
                    schemaScript.textContent = JSON.stringify({ "@type": "SoftwareApplication", "name": t.name, "applicationCategory": "Utilities" });
                }

                // Info Panel Content
                const infoPanel = document.getElementById('info-panel');
                if(t.faq) {
                    infoPanel.innerHTML = `
                        <h2 class="text-lg font-bold text-slate-800 mb-4 border-l-4 border-blue-500 pl-3">${t.name} Hakkında Bilgiler</h2>
                        ${t.faq.h ? `<h3 class="font-bold text-slate-900 mb-2">${t.faq.h}</h3>` : ''}
                        <div class="prose prose-sm text-slate-600">${t.faq.c}</div>
                    `;
                    infoPanel.classList.remove('hidden');
                } else {
                    infoPanel.classList.add('hidden');
                }
            }
        }

        function filterTools() {
            const q = document.getElementById('global-search').value.toLowerCase();
            tools.forEach(t => {
                const btn = document.getElementById(`btn-${t.id}`);
                const matches = t.name.toLowerCase().includes(q) || t.cat.toLowerCase().includes(q);
                btn.style.display = matches ? 'flex' : 'none';
            });
            document.querySelectorAll('.cat-header').forEach(h => {
                let next = h.nextElementSibling;
                let vis = false;
                while(next && !next.classList.contains('cat-header')) {
                    if(next.style.display !== 'none') { vis = true; break; }
                    next = next.nextElementSibling;
                }
                h.style.display = vis ? 'block' : 'none';
            });
        }
        function filterToolsMobile() {
             const q = document.getElementById('mobile-search').value.toLowerCase();
             // Same logic reusing the desktop sidebar buttons which are hidden but controlled
             filterTools(); // Simplified for this demo
        }
        function filterByCat(cat) { document.getElementById('global-search').value = cat; filterTools(); }

        function showRes(id, mainTxt, detailTxt = '') {
            const r = document.getElementById(`res-${id}`);
            document.getElementById(`val-${id}`).innerHTML = mainTxt;
            document.getElementById(`detail-${id}`).innerHTML = detailTxt;
            r.classList.remove('hidden');
            r.scrollIntoView({behavior:'smooth', block:'nearest'});
        }

        // --- CALC FUNCTIONS ---
        function calc_kdv() { const a=getNum('kdv','amt'), r=tools.find(t=>t.id==='kdv').inputs[1].opts[getVal('kdv','rate')].match(/\d+/)[0]/100, t=getVal('kdv','type'); let n,x,tot; if(t==0){n=a/(1+r);x=a-n;tot=a;}else{n=a;x=a*r;tot=a+x;} showRes('kdv', tot.toLocaleString('tr-TR',{minimumFractionDigits:2})+' TL', `Net: <strong>${n.toLocaleString('tr-TR',{minimumFractionDigits:2})}</strong> | KDV: <strong>${x.toLocaleString('tr-TR',{minimumFractionDigits:2})}</strong>`); }
        function calc_tevkifat() { const a=getNum('tevkifat','amt'), r=[0.01,0.1,0.2][getVal('tevkifat','rate')], tn=[2,3,4,5,7,9][getVal('tevkifat','tev')], t=getVal('tevkifat','type'); let m,ft; if(t==1){m=a/(1+r);ft=a-m;}else{m=a;ft=a*r;} const w=ft*tn/10, d=ft-w, p=m+d; showRes('tevkifat', p.toLocaleString('tr-TR',{minimumFractionDigits:2})+' TL', `KDV: ${ft.toFixed(2)} | Tevkifat (${tn}/10): -${w.toFixed(2)} | Beyan: ${d.toFixed(2)}`); }
        function calc_kredi() { const p=getNum('kredi','amt'), t=getNum('kredi','term'), r=getNum('kredi','rate')/100, x=Math.pow(1+r,t), pay=p*(r*x)/(x-1); showRes('kredi', pay.toLocaleString('tr-TR',{maximumFractionDigits:2})+' TL/Ay', `Toplam Geri Ödeme: ${(pay*t).toLocaleString('tr-TR')} TL`); }

        function calc_kidem() {
            const s = new Date(getVal('kidem','start')); const e = new Date(getVal('kidem','end')); const sal = getNum('kidem','salary');
            if (isNaN(s)||isNaN(e)||!sal) return;

            const diffTime = Math.abs(e - s);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            const tenureYears = diffDays / 365;

            let years = e.getFullYear() - s.getFullYear();
            let months = e.getMonth() - s.getMonth();
            let days = e.getDate() - s.getDate();
            if (days < 0) { months--; days += new Date(e.getFullYear(), e.getMonth(), 0).getDate(); }
            if (months < 0) { years--; months += 12; }

            const gross = sal * tenureYears;
            const net = gross * 0.99241;
            showRes('kidem', `${net.toLocaleString('tr-TR', {maximumFractionDigits: 2})} TL`, `${years} Yıl ${months} Ay ${days} Gün`);
        }

        async function calc_ai_asistan() {
            const q = getVal('ai_asistan', 'q');
            if(!q) return;
            showRes('ai_asistan', '<i class="fa-solid fa-spinner fa-spin"></i> Düşünüyorum...', '');
            try {
                const answer = await callGemini(q, "Sen yardımsever ve zeki bir hesaplama asistanısın. Kullanıcının matematiksel, finansal, mantıksal veya genel kültür sorularını Türkçe olarak yanıtla. Cevabın kısa, net ve anlaşılır olsun.");
                const formatted = answer.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\n/g, '<br>');
                showRes('ai_asistan', formatted);
            } catch (e) {
                showRes('ai_asistan', 'Bağlantı Hatası: ' + (e.message || 'Bilinmeyen hata'), 'API Anahtarınızı kontrol edip tekrar deneyin.');
            }
        }

        async function calc_ai_diyet() {
            const w = getVal('ai_diyet', 'w'), h = getVal('ai_diyet', 'h');
            const gIdx = getVal('ai_diyet', 'goal');
            const goals = ['Kilo Vermek', 'Kilo Almak', 'Formu Korumak', 'Kas Yapmak'];
            if(!w || !h) return;
            showRes('ai_diyet', '<i class="fa-solid fa-spinner fa-spin"></i> Plan hazırlanıyor...', '');
            const prompt = `Kilo: ${w}kg, Boy: ${h}cm, Hedef: ${goals[gIdx]}. Bana 1 günlük örnek bir beslenme planı oluştur.`;
            const sys = "Sen uzman bir diyetisyensin. Türkçe liste formatında yanıt ver.";
            try {
                const answer = await callGemini(prompt, sys);
                const formatted = answer.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\n/g, '<br>');
                showRes('ai_diyet', formatted);
            } catch (e) {
                showRes('ai_diyet', 'Plan oluşturulamadı: ' + (e.message || 'Hata'));
            }
        }

        // Short functions
        function calc_bmi() { const h=getNum('bmi','h')/100, w=getNum('bmi','w'), b=w/(h*h); showRes('bmi', b.toFixed(2), b<25?'Normal':b<30?'Fazla Kilo':'Obez'); }
        function calc_yas() { const d=new Date(getVal('yas','date')), n=new Date(); let a=n.getFullYear()-d.getFullYear(), m=n.getMonth()-d.getMonth(); if(m<0||(m===0&&n.getDate()<d.getDate()))a--; showRes('yas', a+' Yaş'); }
        function calc_sifre() {
            const l=getNum('sifre','len');
            const charset = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+";
            let r = "";
            const values = new Uint32Array(l);
            crypto.getRandomValues(values);
            for(let i=0; i<l; i++) r += charset[values[i] % charset.length];
            showRes('sifre', r);
        }
        function calc_zam() { const s=getNum('zam','curr'), r=getNum('zam','rate'); showRes('zam', (s*(1+r/100)).toFixed(2)+' TL'); }
        function calc_indirim() { const p=getNum('indirim','price'), r=getNum('indirim','rate'); showRes('indirim', (p*(1-r/100)).toFixed(2)+' TL'); }
        function calc_net_brut() { showRes('net_brut', (getNum('net_brut','net')/0.7149).toFixed(2)+' TL'); }
        function calc_brut_net() { showRes('brut_net', (getNum('brut_net','brut')*0.7149).toFixed(2)+' TL'); }
        function calc_mevduat() { showRes('mevduat', (getNum('mevduat','amt')*getNum('mevduat','rate')*getNum('mevduat','days')/36500*0.95).toFixed(2)+' TL'); }
        function calc_iban() { const i=getVal('iban','code'); showRes('iban', i.length===26&&i.startsWith('TR')?'Geçerli':'Geçersiz'); }
        function calc_idealkilo() { const h=getNum('idealkilo','h'), k=getVal('idealkilo','g')==0?50+0.9*(h-152):45.5+0.9*(h-152); showRes('idealkilo', Math.round(k)+' kg'); }
        function calc_bmr() { const w=getNum('bmr','w'), h=getNum('bmr','h'), a=getNum('bmr','a'), g=getVal('bmr','g'); showRes('bmr', Math.round(g==0?10*w+6.25*h-5*a+5:10*w+6.25*h-5*a-161)+' kcal'); }
        function calc_makro() { const c=getNum('makro','cal'); showRes('makro', `P:${Math.round(c*0.3/4)}g K:${Math.round(c*0.4/4)}g Y:${Math.round(c*0.3/9)}g`); }
        function calc_nabiz() { showRes('nabiz', (220-getNum('nabiz','age'))+' bpm'); }
        function calc_su() { showRes('su', (getNum('su','w')*0.033).toFixed(1)+' Lt'); }
        function calc_gebelik() { const d=new Date(getVal('gebelik','date')); d.setDate(d.getDate()+280); showRes('gebelik', d.toLocaleDateString('tr-TR')); }
        function calc_sigara() { showRes('sigara', (getNum('sigara','price')*getNum('sigara','daily')*365).toLocaleString()+' TL/Yıl'); }
        function calc_yuzde() { showRes('yuzde', (getNum('yuzde','a')*getNum('yuzde','b')/100).toFixed(2)); }
        function calc_sinav() { const r=getNum('sinav','v')*0.4+getNum('sinav','f')*0.6; showRes('sinav', r.toFixed(1), r>=50?'Geçti':'Kaldı'); }
        function calc_takdir() { const a=getNum('takdir','avg'); showRes('takdir', a>=85?'Takdir':a>=70?'Teşekkür':'Boş'); }
        function calc_dikdortgen() { showRes('dikdortgen', (getNum('dikdortgen','w')*getNum('dikdortgen','h'))+' m²'); }
        function calc_kelime() { showRes('kelime', getVal('kelime','txt').trim().split(/\s+/).filter(x=>x).length+' Kelime'); }
        function calc_internet() { showRes('internet', ((getNum('internet','size')*8192)/getNum('internet','spd')/60).toFixed(1)+' Dk'); }
        function calc_yakit() { showRes('yakit', ((getNum('yakit','km')/100)*getNum('yakit','lit')*getNum('yakit','pr')).toFixed(2)+' TL'); }
        function calc_gun() { const d1=new Date(getVal('gun','d1')), d2=new Date(getVal('gun','d2')); showRes('gun', Math.floor(Math.abs((d2-d1)/864e5))+' Gün'); }
        function calc_hiz() { showRes('hiz', (getNum('hiz','km')/getNum('hiz','hr')).toFixed(1)+' km/s'); }
        function calc_karzarar() { const c=getNum('karzarar','cost'), s=getNum('karzarar','sell'); showRes('karzarar', '%'+((s-c)/c*100).toFixed(1)); }
        function calc_bilesik() { const p=getNum('bilesik','p'), r=getNum('bilesik','r'), t=getNum('bilesik','t'); showRes('bilesik', (p*Math.pow(1+r/100,t)).toFixed(2)+' TL'); }
        function calc_kk_asgari() { const l=getNum('kk_asgari','lim'), d=getNum('kk_asgari','debt'); showRes('kk_asgari', (d*(l>25000?0.4:0.2)).toFixed(2)+' TL'); }
        function calc_komisyon() { showRes('komisyon', (getNum('komisyon','price')*0.02*1.2).toFixed(2)+' TL'); }

        // Helpers
        function getVal(t,i) { return document.getElementById(`${t}-${i}`).value; }
        function getNum(t,i) { return parseFloat(getVal(t,i))||0; }
    </script>
</body>
</html>